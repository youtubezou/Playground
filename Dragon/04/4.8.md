## 4.8 Using Ambiguous Grammars

### 4.8.1

> The following is an ambiguous grammar for expressions with $$n$$ binary, infix operators, at $$n$$ different levels of precedencce:

> $$
E~\rightarrow~E~\theta_1~E~|~E~\theta_2~E~|~\cdots~|~E~\theta_n~E~|~(~E~)~|~\mathbf{id}
$$

> a) As a function of $$n$$, what are the SLR sets of items?

$$6 + 2n$$

> b) How would you resolve the conflicts in the SLR items so that all operators are left associative, and $$\theta_n$$ takes precedence over $$\theta_{n-1}$$, which takes precedence over $$\theta_{n-2}$$, and so on?

Shift when the item is constructed by $$E~\rightarrow~E~\theta_i~E$$ followed by $$\theta_j$$ and $$i < j$$, otherwise reduce.

> c) Show the SLR parsing table that results from your decisions in part (b).

| State | $$($$ | $$)$$ | $$\theta_1$$ | $$\theta_2$$ | $$\cdots$$ | $$\theta_n$$ | $$\mathbf{id}$$ | $$\$$$ | $$E$$ |
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| $$0$$ | $$s_2$$ | | | | | | $$s_3$$ | | $$1$$ |
| $$1$$ | | | $$s_4$$ | $$s_5$$ | | $$s_n$$ | | acc | |
| $$2$$ | $$s_2$$ | | | | | | $$s_3$$ | | $$n + 4$$ |
| $$3$$ | | $$r(~E~\rightarrow~\mathbf{id}~)$$ | $$r(~E~\rightarrow~\mathbf{id}~)$$ | $$r(~E~\rightarrow~\mathbf{id}~)$$ | $$r(~E~\rightarrow~\mathbf{id}~)$$ | $$r(~E~\rightarrow~\mathbf{id}~)$$ |  | $$r(~E~\rightarrow~\mathbf{id}~)$$ | |
| $$4$$ | $$s_2$$ | | | | | | $$s_3$$ | | $$n + 5$$ |
| $$5$$ | $$s_2$$ | | | | | | $$s_3$$ | | $$n + 6$$ |
| $$\cdots$$ | $$s_2$$ | | | | | | $$s_3$$ | | |
| $$n + 3$$ | $$s_2$$ | | | | | | $$s_3$$ | | $$2n + 2$$ |
| $$n + 4$$ | | $$s_{2n+5}$$ | $$s_4$$ | $$s_5$$ | | $$s_{n + 3}$$ | | | |
| $$n + 5$$ | | $$r(~E~\rightarrow~E~\theta_1~E~)$$ | $$r(~E~\rightarrow~E~\theta_1~E~)$$ | $$s_5$$ | | $$s_{n + 3}$$ | | $$r(~E~\rightarrow~E~\theta_1~E~)$$ | |
| $$n + 6$$ | | $$r(~E~\rightarrow~E~\theta_2~E~)$$ | $$r(~E~\rightarrow~E~\theta_2~E~)$$ | $$r(~E~\rightarrow~E~\theta_2~E~)$$ | | $$s_{n + 3}$$ | | $$r(~E~\rightarrow~E~\theta_2~E~)$$ | |
| $$\cdots$$ | | | | | | | | | |
| $$2n + 4$$ | | $$r(~E~\rightarrow~E~\theta_n~E~)$$ | $$r(~E~\rightarrow~E~\theta_n~E~)$$ | $$r(~E~\rightarrow~E~\theta_n~E~)$$ | $$r(~E~\rightarrow~E~\theta_n~E~)$$ | $$r(~E~\rightarrow~E~\theta_n~E~)$$ | $$r(~E~\rightarrow~E~\theta_n~E~)$$ | |
| $$2n + 5$$ | | $$r(~E~\rightarrow~(~E~)~)$$ | $$r(~E~\rightarrow~(~E~)~)$$ | $$r(~E~\rightarrow~(~E~)~)$$ | $$r(~E~\rightarrow~(~E~)~)$$ | $$r(~E~\rightarrow~(~E~)~)$$ | | $$r(~E~\rightarrow~(~E~)~)$$ | |
