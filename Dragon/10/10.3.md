## 10.3 Basic-Block Scheduling

### 10.3.1

> For each of the code fragments of Fig. 10.10, draw the data-dependence graph.

> a)
```
1) LD  R1, a
2) LD  R2, b
3) SUB R3, R1, R2
4) ADD R2, R1, R2
5) ST  a, R3
6) ST  b, R2
```

```
                      +----------------+
  +-------------------+                |
  |      +------------| LD  R1, a      |
  |      |      +-----+                |
  |      |      |     +----------------+
  |      |      |
  |      |      |
  |      |      |     +----------------+
  |      |      |     |                +--------------------+
1 |   2  |    2 |     | LD  R2, b      |                    |
  |      |      |     |                +-----+              |
  |      |      |     +-------+--------+     |              |
  |      |      |             | 2            | 2            |
  |      |      |             |              |              |
  |      |      |     +-------v--------+     |              |
  |      |      |     |                |     |              |
  |      |      +-----> SUB R3, R1, R2 +-------------+      |
  |      |            |                |     |       |      |
  |      |            +----------------+     |       |      |
  |      |                                   |       |      |
  |      |                                   |       |      |
  |      |            +----------------+     |       |      |
  |      +------------>                |     |       |      |
  |                   | ADD R2, R1, R2 <-----+       | 1    | 1
  |             +-----+                |             |      |
  |             |     +----------------+             |      |
  |             |                                    |      |
  |             |                                    |      |
  |             |     +----------------+             |      |
  |             |     |                |             |      |
  +-------------------> ST  a, R3      <-------------+      |
                |     |                |                    |
                |     +----------------+                    |
                |                                           |
                |                                           |
                |     +----------------+                    |
                |     |                |                    |
                +-----> ST  b, R2      <--------------------+
                      |                |
                      +----------------+
```

> b)
```
1) LD  R1, a
2) LD  R2, b
3) SUB R1, R1, R2
4) ADD R2, R1, R2
5) ST  a, R1
6) ST  b, R2
```

> c)
```
1) LD  R1, a
2) LD  R2, b
3) SUB R3, R1, R2
4) ADD R4, R1, R2
5) ST  a, R3
6) ST  b, R4
```

### 10.3.2

> Assume a machine with one ALU resource and one MEM resource. Find a shortest schedule for each of the fragments in Fig. 10.10.

> a)

| ALU | MEM |
|:-|:-|
| | `LD  R1, a` |
| | `LD  R2, b` |
| `SUB R3, R1, R2` | |
| `ADD R2, R1, R2` | `ST  a, R3` |
| | `ST b, R2` |

### 10.3.3

> Repeat Exercise 10.3.2 assuming:

> i. The machine has one ALU resource and two MEM resources.

> ii. The machine has two ALU resource and one MEM resources.

> iii. The machine has two ALU resources and two MEM resources.
